/*
* Kendo UI Complete v2013.3.1316 (http://kendoui.com)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(define){return define(["./kendo.diagram.math.min"],function(){!function(t,i){var e,n,s,o,r,h,a,d,c,u,l,f,p,v,g,m,w,x,k=window.kendo,b=k.Observable,y=k.diagram,_=k.Class,A=k.deepExtend,C=k.dataviz,S=y.Point,z=y.Rect,N=y.RectAlign,E=y.Matrix,M=y.Utils,V=y.MatrixVector,B="http://www.w3.org/2000/svg",T="http://www.w3.org/1999/xlink",W={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},L=100,D=100;y.Markers=W,e=_.extend({init:function(t,i){this.x=t,this.y=i},toMatrix:function(){return E.scaling(this.x,this.y)},toString:function(){return k.format("scale({0},{1})",this.x,this.y)}}),n=_.extend({init:function(t,i){this.x=t,this.y=i},toMatrixVector:function(){return new V(0,0,0,0,this.x,this.y)},toMatrix:function(){return E.translation(this.x,this.y)},toString:function(){return k.format("translate({0},{1})",this.x,this.y)},plus:function(t){this.x+=t.x,this.y+=t.y},times:function(t){this.x*=t,this.y*=t},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){0!==this.Length&&this.times(1/this.length())}}),s=_.extend({init:function(t,i,e){this.x=i||0,this.y=e||0,this.angle=t},toString:function(){return this.x&&this.y?k.format("rotate({0},{1},{2})",this.angle,this.x,this.y):k.format("rotate({0})",this.angle)},toMatrix:function(){return E.rotation(this.angle,this.x,this.y)},center:function(){return new S(this.x,this.y)}}),s.create=function(t){return new s(t.angle,t.x,t.y)},s.parse=function(t){var i=t.slice(1,t.length-1).split(","),e=i[0],n=i[1],o=i[2],r=new s(e,n,o);return r},o=_.extend({init:function(t,o,r,h,a,d){this.translate=new n(t,o),r!==i&&h!==i&&(this.scale=new e(r,h)),a!==i&&(this.rotate=d?new s(a,d.x,d.y):new s(a))},toString:function(){var t=function(t){return t?""+t:""};return t(this.translate)+t(this.rotate)+t(this.scale)},render:function(t){t.setAttribute("transform",""+this)},toMatrix:function(){var t=E.unit();return this.translate&&(t=t.times(this.translate.toMatrix())),this.rotate&&(t=t.times(this.rotate.toMatrix())),this.scale&&(t=t.times(this.scale.toMatrix())),t}}),r=_.extend({init:function(t,i){var e=this;this._originWidth=L,this._originHeight=D,this._visible=!0,e.native=t,e.options=A({},e.options,i),e.redraw()},visible:function(t){return M.isUndefined(t)?this._visible:(this._visible=t,this.native.setAttribute("visibility",t?"visible":"hidden"),i)},setAtr:function(t,e){M.isUndefined(e)||M.isUndefined(this.options[e])||this.options[e]!==i&&this.native.setAttribute(t,this.options[e])},redraw:function(t){t&&(this.options=A({},this.options,t)),this.setAtr("id","id"),this.setAtr("class","cssClass")},position:function(t,e){return e!==i?(this.options.x=t,this.options.y=e,this._pos=new S(t,e)):t instanceof S&&(this._pos=t,this.options.x=this._pos.x,this.options.y=this._pos.y),this._renderTransform(),this._pos},rotate:function(t,e){return t!==i&&(this._rotate=new s(t,e.x,e.y),this._renderTransform()),this._rotate||new s(0)},_renderTransform:function(){var t=new o(this.options.x,this.options.y);t.rotate=this._rotate,t.render(this.native)},_hover:function(){},_measure:function(){var t,i=this.native;if(!this._measured)try{if(t=this._originSize=i.getBBox(),t.width&&t.height)return this._originWidth=t.width,this._originHeight=t.height,this._measured=!0,this._originSize}catch(e){}}}),h=r.extend({init:function(t,i){var e=this;r.fn.init.call(e,t,i)},options:{stroke:"gray",strokeWidth:1,strokeThickness:1,strokeDashArray:"none"},background:function(t){t!==i&&(this.options.background=t),this._background(this.options.background)},redraw:function(t){var i=this;r.fn.redraw.call(i,t),i.setAtr("stroke","stroke"),i.setAtr("stroke-dasharray","strokeDashArray"),i.setAtr("stroke-width","strokeWidth"),i.setAtr("stroke-thickness","strokeThickness"),i.background()},_hover:function(t){this._background(t?this.options.hoveredBackground:this.options.background)},_background:function(t){this.native.setAttribute("fill",this._getColor(t))},_getColor:function(t){var i,e;return"none"!=t?(e=new C.Color(t),i=e.toHex()):i=t,i}}),a=h.extend({init:function(t,i){var e=this;h.fn.init.call(e,t,i)},redraw:function(t){var e=this;h.fn.redraw.call(e,t),e.options.x!==i&&e.options.y!==i&&e.position(e.options.x,e.options.y),e.size()},size:function(t){return t!==i&&(this.options.width=t.width,this.options.height=t.height),this._sz={width:this.options.width,height:this.options.height},this.setAtr("width","width"),this.setAtr("height","height"),this._sz}}),d=a.extend({init:function(t){var i=this;i._originSize=z.empty(),a.fn.init.call(i,document.createElementNS(B,"text"),t)},options:{stroke:"none",strokeWidth:0,strokeThickness:0,strokeDashArray:"none",fontSize:15,fontVariant:"normal",fontWeight:"normal",anchor:"middle",background:"black",align:""},content:function(t){return t!==i&&(this.native.textContent=this.options.text=t,this._align()),this.options.text},redraw:function(t){a.fn.redraw.call(this,t),this.setAtr("font-family","fontFamily"),this.setAtr("font-variant","fontVariant"),this.setAtr("font-size","fontSize"),this.setAtr("font-weight","fontWeight"),this.content(this.options.text)},align:function(t){this.options.align=t,this._align(t)},_align:function(){this._measure();var t=this.options,i=new z(t.x,t.y,t.width,t.height),e=new N(i),n=e.align(this._originSize,t.align);this.options.align&&(n.y+=n.height,this.position(n.topLeft()))}}),c=b.extend({init:function(t,i){b.fn.init.call(this);var e=this;e.native=t||this._createEditor(),e.options=A({},e.options,i),e.redraw()},visible:function(t){return t!==i&&(this._isVisible=t,this.native.style.visibility=t?"visible":"hidden"),this._isVisible},position:function(e,n){return n!==i?(this.options.x=e,this.options.y=n,this._pos=new S(e,n)):e instanceof S&&(this._pos=e,this.options.x=this._pos.x,this.options.y=this._pos.y),t(this.native).css({left:this._pos.x+"px",top:this._pos.y+"px"}),this._pos},size:function(e,n){var s=!1;return n!==i?(this._size={width:e,height:n},s=!0):e===Object(e)&&(this._size={width:e.width,height:e.height},s=!0),s&&(A(this.options,this._size),t(this.native).css({width:this._size.width+"px",height:this._size.height+"px"})),this._size},focus:function(){t(this.native).focus()},content:function(t){return M.isUndefined(t)||(this.native.value=this.options.text=t),this.native.value},redraw:function(t){this.options=A(this.options,t),this.content(this.options.text)},_createEditor:function(){var i=this,e=t("<input type='text' class='textEditable' />").css({position:"absolute",zIndex:100,fontSize:"16px"}).on("mousedown mouseup click dblclick",function(t){t.stopPropagation()}).on("keydown",function(t){t.stopPropagation()}).on("keypress",function(t){t.keyCode==k.keys.ENTER&&i.trigger("finishEdit",t),t.stopPropagation()});return e[0]}}),u=a.extend({init:function(t){a.fn.init.call(this,document.createElementNS(B,"rect"),t)},options:{strokeThickness:i,strokeWidth:i,strokeDashArray:i,background:"none"},redraw:function(t){a.fn.redraw.call(this,t),this.setAtr("rx","cornerRadius"),this.setAtr("ry","cornerRadius"),this.setAtr("stroke","stroke"),this.setAtr("stroke-dasharray","strokeDashArray"),this.setAtr("stroke-width","strokeWidth"),this.setAtr("stroke-thickness","strokeThickness")}}),l=h.extend({init:function(t){var i=this;h.fn.init.call(i,document.createElementNS(B,"path"),t)},data:function(t){return t?(this.options.data=t,i):this.options.data},size:function(){var t,i=this,e=i.options.width/i._originWidth,n=i.options.height/i._originHeight,s=i.options.x||0,r=i.options.y||0;e=M.isNumber(e)?e:1,n=M.isNumber(n)?n:1,t=new o(s,r,e,n),i.native.setAttribute("transform",""+t)},redraw:function(t){var i=this;h.fn.redraw.call(i,t),i.size(),i.setAtr("d","data"),this.options.startCap&&this.options.startCap!==W.none?this.native.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.native.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==W.none?this.native.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.native.removeAttribute("marker-end"),this.native.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.native.parentNode.insertBefore(this.native,this.native)}}),f=r.extend({init:function(t){var i,e,n=this;r.fn.init.call(n,document.createElementNS(B,"marker"),t),e=n.options,e.path?i=new l(e.path):e.circle&&(i=new w(e.circle)),i&&this.native.appendChild(i.native)},redraw:function(t){r.fn.redraw.call(this,t);var i=this,e=i.options;e.ref&&(i.native.refX.baseVal.value=e.ref.x,i.native.refY.baseVal.value=e.ref.y),e.width&&(i.native.markerWidth.baseVal.value=e.width),e.height&&(i.native.markerHeight.baseVal.value=e.height),this.setAtr("orient","orientation"),this.setAtr("viewBox","viewBox")}}),p=h.extend({init:function(t){h.fn.init.call(this,document.createElementNS(B,"line"),t),this.options.from=this.options.from||new S,this.options.to=this.options.to||new S},redraw:function(t){h.fn.redraw.call(this,t),this.options.from&&(this.native.setAttribute("x1",""+this.options.from.x),this.native.setAttribute("y1",""+this.options.from.y)),this.options.to&&(this.native.setAttribute("x2",""+this.options.to.x),this.native.setAttribute("y2",""+this.options.to.y)),this.options.startCap&&this.options.startCap!==W.none?this.native.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.native.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==W.none?this.native.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.native.removeAttribute("marker-end"),this.native.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.native.parentNode.insertBefore(this.native,this.native)}}),v=h.extend({init:function(t){var i=this;h.fn.init.call(i,document.createElementNS(B,"polyline"),t),M.isDefined(t)&&null!==t.points&&this.points(i.options.points),this.background("none")},refresh:function(){if(null!==this._points&&0!==this._points.length){var t,i="";for(t=0;t<this._points.length;t++)i+=" "+this._points[t].x+","+this._points[t].y;this.native.setAttribute("points",i.trim()),this.native.setAttribute("stroke","Orange"),this.native.setAttribute("stroke-width","5")}},points:function(t){return M.isUndefined(t)?this._points:(this._points=t,this.refresh(),i)},redraw:function(){this.refresh()},options:{stroke:"gray",strokeThickness:5,backgrounds:"none",points:[]}}),g=r.extend({init:function(t){r.fn.init.call(this,document.createElementNS(B,"image"),t)},redraw:function(t){r.fn.redraw.call(this,t),this.native.setAttributeNS(T,"href",this.options.source),this.setAtr("width","width"),this.setAtr("height","height"),this.setAtr("x","x"),this.setAtr("y","x")}}),m=r.extend({init:function(t){r.fn.init.call(this,document.createElementNS(B,"g"),t),this.width=this.options.width,this.height=this.options.height},options:{autoSize:!1},append:function(t){this.native.appendChild(t.native),t.canvas=this.canvas},remove:function(t){t.native?this.native.removeChild(t.native):this.native.removeChild(t)},clear:function(){for(;this.native.lastChild;)this.native.removeChild(this.native.lastChild)},toFront:function(t){var i,e,n=this.native;for(e=0;e<t.length;e++)i=t[e],n.appendChild(i.native)},toBack:function(t){var i,e;for(e=0;e<t.length;e++)i=t[e],this.native.insertBefore(i.native,this.native.firstChild)},toIndex:function(t,i){var e,n,s;for(n=0;n<t.length;n++)e=t[n],s=i[n],this.native.insertBefore(e.native,this.native.children[s])},size:function(){var t,i=this.options.width/this._originWidth,e=this.options.height/this._originHeight,n=this.options.x||0,s=this.options.y||0;i=M.isNumber(i)?i:1,e=M.isNumber(e)?e:1,t=new o(n,s,i,e),this.native.setAttribute("transform",""+t)},redraw:function(t){r.fn.redraw.call(this,t),this.options.autoSize&&this.size()}}),w=h.extend({init:function(t){var i=this;t&&t.radius&&(t.width=2*t.radius,t.height=2*t.radius),h.fn.init.call(i,document.createElementNS(B,"ellipse"),t)},redraw:function(t){t&&M.isNumber(t.width)&&M.isNumber(t.height)&&(t.center=new S(t.width/2,t.height/2)),h.fn.redraw.call(this,t);var i=this.native,e=this.options,n=e.width/2||e.rx,s=e.height/2||e.rx;n&&s&&(i.rx.baseVal.value=n,i.ry.baseVal.value=s),e.center?(i.cx.baseVal.value=e.center.x,i.cy.baseVal.value=e.center.y):M.isDefined(e.x)&&M.isDefined(e.y)?(i.cx.baseVal.value=e.x+n,i.cy.baseVal.value=e.y+s):(i.cx.baseVal.value=n,i.cy.baseVal.value=s)}}),x=a.extend({init:function(i,e){var n=this;a.fn.init.call(n,document.createElementNS(B,"svg"),e),this.markers=[],this.gradients=[],this.visuals=[],this.defsNode=document.createElementNS(B,"defs"),this.native.appendChild(this.defsNode),this.element=i.context?i.context:i,t(this.native).css({width:this.options.width,height:this.options.height}),this.element.appendChild(n.native),this.native.style.background=n.options.background,this.native.setAttribute("xmlns",B),this.native.setAttribute("xmlns:xlink",T),this.element.setAttribute("tabindex","0"),this._markers()},options:{width:"100%",height:"100%",background:"none",id:"SVGRoot"},bounds:function(){var t=this.native.getBBox();return new z(0,0,t.width,t.height)},focus:function(){this.element.focus()},append:function(t){return this.native.appendChild(t.native),t.canvas=this,this.visuals.push(t),this},remove:function(t){return this.visuals.indexOf(t)>=0?(this.native.removeChild(t.native),t.canvas=i,this.visuals.remove(t),this):i},insertBefore:function(t,i){return this.native.insertBefore(t.native,i.native),t.canvas=this,this.visuals.push(t),this},addMarker:function(t){this.defsNode.appendChild(t.native),this.markers.push(t)},removeMarker:function(t){t&&this.markers.contains(t)&&(this.defsNode.removeChild(t.native),this.markers.remove(t))},removeGradient:function(t){t&&this.gradients.contains(t)&&(this.defsNode.removeChild(t.native),this.gradients.remove(t))},addGradient:function(t){this.defsNode.appendChild(t.native),this.gradients.push(t)},clearMarkers:function(){var t;if(0!==this.markers.length){for(t=0;t<this.markers.length;t++)this.defsNode.removeChild(this.markers[t].native);this.markers=[]}},clear:function(){for(;this.visuals.length;)this.remove(this.visuals[0])},_markers:function(){this.addMarker(new f({path:{data:"M 0 0 L 10 5 L 0 10 L 3 5 z",background:"Black"},id:W.arrowEnd,orientation:"auto",width:10,height:10,ref:new S(10,5)})),this.addMarker(new f({path:{data:"M 0 5 L 10 0 L 7 5 L 10 10 z",background:"Black"},id:W.arrowStart,orientation:"auto",width:10,height:10,ref:new S(0,5)})),this.addMarker(new f({circle:{width:6,height:6,center:new S(5,5),strokeThickness:1,background:"black"},width:10,height:10,id:W.filledCircle,ref:new S(5,5),orientation:"auto"}))}}),k.deepExtend(y,{init:function(t){k.init(t,k.diagram.ui)},Scale:e,Translation:n,Rotation:s,Circle:w,Group:m,Rectangle:u,Canvas:x,Path:l,Line:p,Marker:f,Polyline:v,CompositeTransform:o,TextBlock:d,TextBlockEditor:c,Image:g})}(window.kendo.jQuery)})}("function"==typeof define&&define.amd?define:function(t,i){return i()});